!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e||self).useContextSelectorV2={},e.react)}(this,function(e,t){function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}function r(e,n){var r=t.useContext(e),u=r.value,c=r.registerListener,o=t.useState(function(){return n(u.current)}),i=o[0],f=o[1],s=t.useRef(n);return t.useEffect(function(){s.current=n},[n,s]),t.useEffect(function(){return c(function(e,t){return function(e,t){var n=s.current(e),r=s.current(t);JSON.stringify(n)!==JSON.stringify(r)&&f(function(){return n})}(e,t)})},[c,u]),i}e.createContext=function(){var e,n=/*#__PURE__*/t.createContext();return delete n.Consumer,n.Provider=(e=n.Provider,function(n){var r=n.value,u=n.children,c=t.useRef(r),o=t.useRef(new Set),i=t.useRef({value:c,registerListener:function(e){return o.current.add(e),function(){return o.current.delete(e)}},listeners:new Set});return t.useEffect(function(){o.current.forEach(function(e){e(r,c.current)}),c.current=r},[r]),h(e,{value:i.current},u)}),n},e.useContextSelector=function(e,t){return"function"==typeof t?r(e,t):Array.isArray(t)?r(e,function(e){return t.reduce(function(t,r){var u;return n({},t,((u={})[r]=e[r],u))},{})}):"object"==typeof t?r(e,function(e){return Object.keys(t).filter(function(e){return t[e]}).reduce(function(t,r){var u;return n({},t,((u={})[r]=e[r],u))},{})}):void 0}});
//# sourceMappingURL=use-context-selector-v2.umd.js.map
