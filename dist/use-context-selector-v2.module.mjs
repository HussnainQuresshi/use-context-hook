import{useRef as r,useEffect as n,useContext as t,useState as e,createContext as u}from"react";function c(){return c=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])}return r},c.apply(this,arguments)}function i(r,n){return"function"==typeof n?f(r,n):Array.isArray(n)?f(r,function(r){return n.reduce(function(n,t){var e;return c({},n,((e={})[t]=r[t],e))},{})}):"object"==typeof n?f(r,function(r){return Object.keys(n).filter(function(r){return n[r]}).reduce(function(n,t){var e;return c({},n,((e={})[t]=r[t],e))},{})}):void 0}function o(){var t,e=/*#__PURE__*/u();return delete e.Consumer,e.Provider=(t=e.Provider,function(e){var u=e.value,c=e.children,i=r(u),o=r(new Set),f=r({value:i,registerListener:function(r){return o.current.add(r),function(){return o.current.delete(r)}},listeners:new Set});return n(function(){o.current.forEach(function(r){r(u,i.current)}),i.current=u},[u]),h(t,{value:f.current},c)}),e}function f(u,c){var i=t(u),o=i.value,f=i.registerListener,a=e(function(){return c(o.current)}),s=a[0],v=a[1],l=r(c);return n(function(){l.current=c},[c,l]),n(function(){return f(function(r,n){return function(r,n){var t=l.current(r),e=l.current(n);JSON.stringify(t)!==JSON.stringify(e)&&v(function(){return t})}(r,n)})},[f,o]),s}export{o as createContext,i as useContextSelector};
//# sourceMappingURL=use-context-selector-v2.module.mjs.map
