import{useRef as r,useEffect as e,useContext as t,useState as n,createContext as c}from"react";function u(){return u=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},u.apply(this,arguments)}function i(r,e){return"function"==typeof e?s(r,e):Array.isArray(e)?s(r,r=>e.reduce((e,t)=>u({},e,{[t]:r[t]}),{})):"object"==typeof e?s(r,r=>Object.keys(e).filter(r=>e[r]).reduce((e,t)=>u({},e,{[t]:r[t]}),{})):void 0}function o(){const t=/*#__PURE__*/c();var n;return delete t.Consumer,t.Provider=(n=t.Provider,({value:t,children:c})=>{const u=r(t),i=r(new Set),o=r({value:u,registerListener:r=>(i.current.add(r),()=>i.current.delete(r)),listeners:new Set});return e(()=>{i.current.forEach(r=>{r(t,u.current)}),u.current=t},[t]),h(n,{value:o.current},c)}),t}function s(c,u){const{value:i,registerListener:o}=t(c),[s,a]=n(()=>u(i.current)),f=r(u);return e(()=>{f.current=u},[u,f]),e(()=>o((r,e)=>((r,e)=>{const t=f.current(r),n=f.current(e);JSON.stringify(t)!==JSON.stringify(n)&&a(()=>t)})(r,e)),[o,i]),s}export{o as createContext,i as useContextSelector};
//# sourceMappingURL=use-context-selector-v2.modern.mjs.map
